<Ball>:
    canvas.before:
        PushMatrix
        Rotate:
            angle: -self.parent.rotation
            origin: self.center
    size: 150, 150
    canvas:
        Color:
            rgb: self.color[0], self.color[1], self.color[2]
        Ellipse:
            pos: self.pos
            size: (1,1)
    canvas.after:
        PopMatrix

    on_touch_up: self.released(args)
    on_touch_down: self.pushed(args)
    on_touch_move: self.moved(args)

    Image:
        source: "Kivy/Images/steel_ball_crisp.png"
        pos: root.pos
        size: root.size

<BallString>:
    canvas.before:
        PushMatrix
        Rotate:
            angle: self.rotation
            origin: self.center
    canvas:
        Color:
            rgb: 0.8, 0.8, 0.8
        Line:
            width: 5
            points: [root.center_x, root.center_y, root.center_x, root.center_y - 400]
    canvas.after:
        PopMatrix
    Ball:
        id: ball
        center_x: root.center_x
        center_y: root.center_y - 400


<Cradle>:
    BallString:
        name: "left"
        center_x: root.center_x - 300
        center_y: root.center_y

    BallString:
        name: "middle-left"
        center_x: root.center_x - 150
        center_y: root.center_y

    BallString:
        name: "middle"
        center_x: root.center_x
        center_y: root.center_y

    BallString:
        name: "middle-right"
        center_x: root.center_x + 150
        center_y: root.center_y

    BallString:
        name: "right"
        center_x: root.center_x + 300
        center_y: root.center_y


<MainScreen>:    #start scene with a button and label
    name: 'main'
    cradle: cradle
    FloatLayout:
        size_hint: None, None  #Needed to be able to define define height and width of widgets
        ################# TITLE #################
        Label:
            center_x: root.center_x
            center_y: root.center_y + 320
            text: "Newton's Cradle"
            color: 0,0,0,1
            font_size: 70
            
        ################# BALLS #################          

        Cradle:
            id: cradle
            center_x: root.center_x
            center_y: root.center_y + 250
            
        ################# EXECUTE #################    
        DPEAButton:
            background_normal: ''
            size_hint: None,None
            text: 'SCOOP!'
            size: 250, 100
            center_x: root.width * .50 
            y: root.height * 0.05
            color: 1,1,0,1
            background_color: 0, 0, 0, 0
            on_release: root.scoop_call_back()
            
        ################# ADMIN #################   
        Button:
            size_hint: None,None
            size: 10, 10
            font_size: 20
            background_color: 0.5, 0, 0, 0
            center: root.width -5, 5
            on_release: root.admin_action()

<adminFunctionsScreen>:
    name: 'adminFunctionsScreen'
    FloatLayout:
        size_hint: None, None
        
        DPEAButton:
            size_hint: None,None
            background_normal: '' 
            text: 'Quit'
            size: 400, 150
            color: 1, 0, 0, 1
            background_color: 0, 0, 0, 0
            center_x: root.width * .50 
			center_y: root.height * .50
            on_release: root.quit_action()
        DPEAButton:
            size_hint: None, None
            background_normal: '' 
            text: 'Home'
            size: 400, 150
            color: 0, 1, 0, 1
            background_color:0, 0, 0, 0
            center_x: root.width * .50 
			center_y: root.height * .25
            on_release: root.home_action()
